ACTOR ScimitarFamiliar2 12345 
{
   //$Category Monsters
   Health 50
   PainChance 85
   Speed 20 
   Radius 16 
   Height 32 
   Mass 25
   Alpha .5
   MeleeDamage 25
   Damage (random(50,120))
   Damagetype Cut
   MONSTER
   //+FLOORCLIP
   +DONTHURTSPECIES
   +NOGRAVITY
   +FLOAT
   +NOBLOOD
    +FRIENDLY
	+DONTFALL 
	+NOICEDEATH
	Species "Marines"
	MaxStepHeight 64
	MaxDropOffHeight 64
	MeleeRange 32
	
   SeeSound "scimitar/scimisee"
   PainSound "scimitar/scimipai"
   DeathSound "scimitar/scimidth"
   Obituary "%o was sliced by a Scimitar."

   States 
   { 
   Spawn: 
       SCIM A 3 BRIGHT A_Look 
       Loop 
   See: 
       SCIM A 3 BRIGHT A_Chase 
       Loop 
   //Missile:
    //   SCIM D 4 BRIGHT A_FaceTarget
	//   SCIM E 0 Bright A_PlaySound("scimitar/scimiatk")
       //SCIM D 4 Bright A_CustomMissile ("ScimShot1",32,0,0,0,0)
	//   goto Charge
    //   Goto See  
   Melee:
       SCIM C 4 BRIGHT A_FaceTarget
       SCIM A 4 BRIGHT
       SCIM B 4 BRIGHT A_MeleeAttack
       SCIM B 0 A_PlaySound ("scimitar/scimihit")
       Goto See
   Pain:  
       SCIM F 6 BRIGHT A_Pain 
       Goto See 
   Death: 
       SCIM G 6 BRIGHT A_Scream
       SCIM H 6 BRIGHT A_NoBlocking
       SCIM I 6 BRIGHT
       SCIM J 6 BRIGHT
       SCIM K 6 BRIGHT
       SCIM L -1
       Stop
   Charge:
       SCIM E 0 Bright A_PlaySound("scimitar/scimiatk")
       SCIM F 4 A_FaceTarget
	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
       SCIM F 4 A_SkullAttack
   	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
       SCIM F 4 A_FaceTarget
		TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
       SCIM F 4 A_SkullAttack
   	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
       SCIM F 4 A_FaceTarget
	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
       SCIM F 4 A_SkullAttack
       SCIM F 0 A_Stop
       SCIM F 1
       Goto See
   Raise: 
       SCIM BCA 5 
       Goto See 
   } 
}


ACTOR ScimShot1
{
   Radius 4
   Height 8
   Speed 50
   Damage 2
   PROJECTILE
   Damagetype "Bone"
   +THRUGHOST
   +RIPPER
   DeathSound "weapons/glahit"
   States
   {
   Spawn:
      RFX1 PPPPPPPP 1 Bright A_SpawnItemEx("ScimTrail1",0,0,0,0,0,0,0,128,0)
      NULL AAAAAAAA 0 A_SpawnItemEx("ScimShot2",0,0,0,25,random(-6,6),momz+random(-3,3),0,0,0)
      stop
   Death:
      RFX1 L 0 Bright A_SetTranslucent(0.67,1)
      RFX1 LMNO 4 Bright
      stop
   }
}

ACTOR ScimTrail1
{   
   Radius 0
   Height 1
   Damage 0
   Speed 0
   Scale 0.5
   PROJECTILE
   RENDERSTYLE ADD
   ALPHA 0.50
   States
   {
   Spawn:
      BONE BCDEFGH 2 Bright
      Stop 
   }
}

ACTOR ScimShot2
{
   Radius 2
   Height 4
   Speed 35
   Damage 1
   PROJECTILE
   Damagetype "Bone"
   +THRUGHOST
   DeathSound "weapons/thornx"
   States
   {
   Spawn:
      RFX1 A 1 Bright A_SpawnItemEx("ScimTrail2",0,0,0,0,0,0,0,128,0)
      loop
   Death:
      RFX1 G 0 Bright A_SetTranslucent(0.67,1)
      RFX1 GHIJCDEF 3 Bright
      stop
   }
}

ACTOR ScimTrail2
{   
   Radius 1
   Height 1
   RENDERSTYLE ADD
   ALPHA 0.50
   +NOGRAVITY
   +NOBLOCKMAP
   States
   {
   Spawn:
      RFX1 BCDEF 3 Bright
      Stop 
   }
}

ACTOR ScimitarFamiliar
{
	Game Doom
	Health 100
	Radius 16
	Height 32
	Mass 50
	Speed 35
	DeathHeight 4
	BurnHeight 0
	Damage (random(50,120))
	PainChance 255
	PainChance "Kick", 255
	damagefactor "GibRemoving", 0.0 damagefactor "HangingHook", 0
	PainChance "Avoid", 255
	damagefactor "Fire", 0 damagefactor "sAW", 4.0 damagefactor "Cut", 4.0
	Monster
    +NOBLOOD
	damagefactor "Blood", 0.0 damagefactor "BlueBlood", 0.0 damagefactor "GreenBlood", 0.0
    damagefactor "Fatality", 5.0 damagefactor "PussyGrab", 50.0
	damagefactor "TeleportRemover", 0.0
	DamageFactor "CauseSplash", 0.0 DamageFactor "CauseObjectsToSplashSlime", 0.0 DamageFactor "CauseObjectsToSplashNukage", 0.0
	DamageFactor "CauseObjectsToSplashBlood", 0.0 DamageFactor "CauseObjectsToSplashLava", 0.0
	RenderStyle Normal
    bloodcolor none
	+FLOAT +NOGRAVITY +DONTFALL +NOICEDEATH
	+FORCEXYBILLBOARD
	
   SeeSound "scimitar/scimisee"
   PainSound "scimitar/scimipai"
   DeathSound "scimitar/scimidth"
   Obituary "%o was sliced by a Scimitar."

	DamageType "Cut"
	//MinMissileChance 50
	BloodType "LostSoulBlood"
	damagefactor "ExplosiveImpact", 3.0
	damagefactor "Shrapnel", 3.0
	damagefactor "Explosives", 3.0
	Tag "Lost Soul"
    Alpha 1
	
   +DONTHURTSPECIES
   +FLOAT
   +NOBLOOD
   +FRIENDLY
	Species "Marines"

	
	States
	{
	Pain.Avoid: 
	  TNT1 A 0
	  TNT1 A 0 A_Jump(255, "AvoidLeft", "AvoidRight")
	  Goto AvoidLeft
	  AvoidLeft:
	    SCIM A 1 A_FaceTarget
	    TNT1 A 0 ThrustThing(angle*256/360+192, 15, 0, 0)
        SCIM A 5 A_FaceTarget
        Goto Missile
	AvoidRight:
	    SCIM A 1 A_FaceTarget
	    TNT1 A 0 ThrustThing(angle*256/360+64, 15, 0, 0)
        SCIM A 5 A_FaceTarget
        Goto Missile
		
	Spawn:
		SCIM A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		SCIM A 2 BRIGHT A_Look
		TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
		//SCIM AA 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
		Loop
		
    Spawn2:
		LSOZ AAAAAAAA 10 A_Look
		TNT1 A 0 A_CheckSight("Spawn2")
		Goto Spawn
	See:
	    TNT1 A 0
		TNT1 A 0 A_TakeInventory("MaxLostSoulRange", 30)
		SCIM A 2 BRIGHT A_Chase("", "")
		//TNT1 A 0 A_JumpIfCloser(160, "Retreat")
		TNT1 A 0 A_ChangeFlag("NOPAIN", 0)
		//LSOL A 0 A_CustomMissile ("CoolAndNewFlameTrailsLongAlpha", 24, 0, random (0, 360), 2, random (0, 160))
		SCIM A 2 BRIGHT A_Chase
		//TNT1 A 0 A_JumpIfCloser(160, "Retreat")
	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
		//LSOL A 0 A_CustomMissile ("CoolAndNewFlameTrailsLongAlpha", 24, 0, random (0, 360), 2, random (0, 160))
     //   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
		Loop
	Retreat:
		SCIM A 1 A_FaceTarget
		TNT1 A 0 A_Recoil(3)
	    TNT1 A 0 A_SpawnItem ("BlueFlareMedium", 0, 24)
		//LSOL A 0 A_CustomMissile ("CoolAndNewFlameTrailsLongAlpha", 24, 0, random (0, 360), 2, random (0, 160))
     //   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
	    Goto See
	
	   Charge:
       SCIM F 2 A_FaceTarget
	   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
       SCIM F 2 A_SkullAttack
	   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
       SCIM F 2 A_FaceTarget
	   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
       SCIM F 2 A_SkullAttack
	   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
       SCIM F 2 A_FaceTarget
	   SCIM A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
       SCIM F 2 A_SkullAttack
       SCIM F 0 A_Stop
       SCIM F 1
       Goto See
		
	Missile:
		SKUL A 0 BRIGHT A_SpawnItem ("BlueFlare", 0, 24)
		TNT1 A 0 A_ChangeFlag("NOPAIN", 1)
		SCIM D 3 BRIGHT A_FaceTarget
		SKUL A 0 BRIGHT A_SpawnItem ("BlueFlare", 0, 24)
		SCIM F 0 BRIGHT A_SkullAttack
       // TNT1 A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
		SCIM FF 2 BRIGHT A_SpawnItem ("BlueFlareMEdium", 0, 24)
        //TNT1 A 0 A_CustomMissile ("SoulTrails", 24, 0, random (0, 360), 2, random (0, 160))
		SCIM FF 2 BRIGHT A_SpawnItem ("BlueFlareMEdium", 0, 24)
		TNT1 A 0 A_JumpIfInventory("MaxLostSoulRange", 10, "See")
		TNT1 A 0 A_giveInventory("MaxLostSoulRange", 1)
		Goto Missile+6
	Pain:
        //TNT1 AAA 0 A_CustomMissile ("SoulTrails", 12, 0, random (0, 360), 2, random (0, 160))
		SCIM F 3 BRIGHT
        TNT1 A 0 A_Jump (128, 3)
        Goto Avoid
        TNT1 AAA 0
        //TNT1 AAA 0 A_CustomMissile ("SoulTrails", 12, 0, random (0, 360), 2, random (0, 160))
		SCIM F 1 BRIGHT A_Pain
		Goto See

   Melee:
       SCIM C 4 BRIGHT A_FaceTarget
       SCIM AA 2 BRIGHT A_CustomMissile("SwordSlash", 0, 0, 0, 3)
       SCIM BB 2 BRIGHT A_CustomMissile("SwordSlash", 0, 0, 0, 3)
       SCIM B 0 A_PlaySound ("scimitar/scimihit")
       Goto See

	Avoid:
         NULL A 0 A_FaceTarget
         SCIM A 6 A_FastChase
		SCIM A 0 BRIGHT A_SpawnItem ("BlueFlareMedium", 0, 24)

         NULL A 0 A_FaceTarget
         SCIM B 6 BRIGHT A_FastChase
		SCIM A 0 BRIGHT A_SpawnItem ("BlueFlareMedium", 0, 24)

         NULL A 0 A_FaceTarget
         SCIM B 6 BRIGHT A_FastChase
		SCIM A 0 BRIGHT A_SpawnItem ("BlueFlareMedium", 0, 24)

         NULL A 0 A_FaceTarget
         SCIM B 6 BRIGHT A_FastChase
		SCIM A 0 BRIGHT A_SpawnItem ("BlueFlareMedium", 0, 24)

		Goto Missile

    Death: 
       SCIM G 6 BRIGHT A_Scream
       SCIM H 6 BRIGHT A_NoBlocking
       SCIM I 6 BRIGHT
       SCIM J 6 BRIGHT
       SCIM K 6 BRIGHT
       SCIM L -1


    Pain.KillMe:
    Pain.Taunt:
        TNT1 A 0
		TNT1 A 0 HealThing(1)
        Goto Missile
    Death.KillMe:
    Death.Taunt:
	    TNT1 A 0 A_ChangeFlag("SOLID", 0)
        TNT1 A 0 A_SpawnItem("LostSoul")
        Stop
	}
}
